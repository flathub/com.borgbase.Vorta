{
    "name": "pyqt5",
    "build-options": {
        "arch": {
            "aarch64": {
                "env": {
                    "config_opt": "--disable-feature=PyQt_Desktop_OpenGL"
                }
            }
        }
    },
    "cleanup": [
        "/bin"
    ],
    "buildsystem": "simple",
    "build-commands": [
        "PY_VER=python$(python3 -c 'import sys; print(sys.version[:3])') && python3 configure.py --confirm-license --assume-shared --destdir=/app/lib/${PY_VER}/site-packages --stubsdir=/app/lib/${PY_VER}/site-packages/PyQt5 --sipdir=/app/share/sip/PyQt5 --no-designer-plugin --no-qml-plugin --no-tools --enable=QtDBus --enable=QtCore --enable=QtGui --enable=QtNetwork --enable=QtWidgets ${config_opt}",
        "make -j $FLATPAK_BUILDER_N_JOBS",
        "make install"
    ],
    "sources": [
        {
            "type": "archive",
            "url": "https://files.pythonhosted.org/packages/source/p/pyqt5/PyQt5-5.15.2.tar.gz",
            "sha256": "372b08dc9321d1201e4690182697c5e7ffb2e0770e6b4a45519025134b12e4fc"
        }
    ],
    "modules": [
        {
            "name": "python3-sip",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --no-build-isolation --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"sip>=5,<6\""
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/33/e9/27730ac17713c0a80d81d8f3bb56213f1549d96f9dc183fd16a7eec6287c/sip-5.5.0.tar.gz",
                    "sha256": "5d024c419b30fea8a6de8c71a560c7ab0bc3c221fbfb14d55a5b865bd58eaac5"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/be/ba/1f744cdc819428fc6b5084ec34d9b30660f6f9daaf70eead706e3203ec3c/toml-0.10.2.tar.gz",
                    "sha256": "b3bda1d108d5dd99f4a20d24d9c348e91c4db7ab1b749200bded2f839ccbe68f"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/d7/c5/e81b9fb8033fe78a2355ea7b1774338e1dca2c9cbd2ee140211a9e6291ab/packaging-20.8.tar.gz",
                    "sha256": "78598185a7008a470d64526a8059de9aaa449238f280fc9eb6b13ba6c4109093"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/c1/47/dfc9c342c9842bbe0036c7f763d2d6686bcf5eb1808ba3e170afdb282210/pyparsing-2.4.7.tar.gz",
                    "sha256": "c203ec8783bf771a155b207279b9bccb8dea02d8f0c9e5f8ead507bc3246ecc1"
                }
            ]
        },
        {
            "name": "python3-PyQt-builder",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --no-build-isolation --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"PyQt-builder\""
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/83/0d/294ea54d0ca5d6ca13e5da1e84c3508b293da5b7bc9298049c8d7b1a0238/PyQt-builder-1.7.0.tar.gz",
                    "sha256": "b6e3c826f98ff4006ecb34df491ac6062a023b63a32e9f9f50904867aff72f2e"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/33/e9/27730ac17713c0a80d81d8f3bb56213f1549d96f9dc183fd16a7eec6287c/sip-5.5.0.tar.gz",
                    "sha256": "5d024c419b30fea8a6de8c71a560c7ab0bc3c221fbfb14d55a5b865bd58eaac5"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/d7/c5/e81b9fb8033fe78a2355ea7b1774338e1dca2c9cbd2ee140211a9e6291ab/packaging-20.8.tar.gz",
                    "sha256": "78598185a7008a470d64526a8059de9aaa449238f280fc9eb6b13ba6c4109093"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/be/ba/1f744cdc819428fc6b5084ec34d9b30660f6f9daaf70eead706e3203ec3c/toml-0.10.2.tar.gz",
                    "sha256": "b3bda1d108d5dd99f4a20d24d9c348e91c4db7ab1b749200bded2f839ccbe68f"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/c1/47/dfc9c342c9842bbe0036c7f763d2d6686bcf5eb1808ba3e170afdb282210/pyparsing-2.4.7.tar.gz",
                    "sha256": "c203ec8783bf771a155b207279b9bccb8dea02d8f0c9e5f8ead507bc3246ecc1"
                }
            ]
        },
        {
            "name": "python3-PyQt5-sip",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --no-build-isolation --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"PyQt5-sip<13,>=12.8\""
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/73/8c/c662b7ebc4b2407d8679da68e11c2a2eb275f5f2242a92610f6e5024c1f2/PyQt5_sip-12.8.1.tar.gz",
                    "sha256": "30e944db9abee9cc757aea16906d4198129558533eb7fadbe48c5da2bd18e0bd"
                }
            ]
        }
    ]
}
